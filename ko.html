<html>
    <p>City: <strong data-bind="text: city"></strong></p>
    <input placeholder='other city?' data-bind="textInput: city">

    <section class="section sectionThemes">
      <h1 data-bind="text: title"></h1>
      <table class="">
        <thead><tr><th>Name</th><th>Points</th>
        <tbody data-bind="foreach: themes">
          <tr>
            <td>
              <a data-bind="attr: { href: url, title: details }">
                  Report
              </a>
            </td>
            <td data-bind="text: points"></td>
          </tr>     
        </tbody>
      </table>
    </section>
</html>

<script src="js/knockout.min.js"></script>
<script src="js/jquery.min.js"></script>
<script src="js/sammy.js"></script>
<script>
var tc; //TourChamp
var defThemes = [{name:1,points:2},{name:10,points:20}];
set = function(field,val) { tc[field](val) };
var lastSection = null;
show = function(sectionName) { 
  if (lastSection == sectionName) return;
  $('.section').hide();
  $("."+sectionName).show();
  lastSection = sectionName;
}
// This is a simple *viewmodel* - JavaScript that defines the data and behavior of your UI
function vm() {
  tc = self = this;
  self.firstName = "Bert";
  self.lastName = "Bertington";
  self.color = ko.observable("blue");
  self.foo = ko.observable();

  // self.folders = ['Inbox', 'Archive', 'Sent', 'Spam'];
  // self.chosenFolderId = ko.observable();
  // self.chosenFolderData = ko.observable();

  self.city = ko.observable("Tel Aviv");
  self.title = ko.observable("");
  // Behaviours    
  // self.goToFolder = function(folder) { 
  //     self.chosenFolderId(folder);
  //     $.get('/js/mail.json', { folder: folder }, self.chosenFolderData);
  // };
  // Show inbox by default
  //self.goToFolder('Inbox');

  self.themes = ko.observable(defThemes)
  self.showThemes = function(themes) {
    self.title('Themes');
    show('sectionThemes');
  }

  Sammy(function() {
        this.get('#city/:city', function() {
            self.city(this.params.city);            
            //$.get("/mail", { folder: this.params.folder }, self.showThemes);
            self.showThemes(defThemes);
        });

        this.get('#challenge/:challengeName', function() {
            self.city(this.params.city);            
            //$.get("/mail", { folder: this.params.folder }, self.showThemes);
            self.showThemes(defThemes);
        });
        //this.get('', function() { this.app.runRoute('get', '#Inbox') });
  }).run(); 
}

// Activates knockout.js
ko.applyBindings(new vm());
set('foo','bar');

</script>